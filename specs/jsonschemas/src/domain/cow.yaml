jsonschema:
  properties:
    productionSystem:
      $ref: '#/definitions/ProductionSystemId'
    age:
      type: number
      title: Age (days)
    cowSource:
      type: string
      title: Source

    climateScore:
      type: number
      title: Climate score
    complianceScore:
      type: number
      title: Compliance score
    breed:
      type: string
      title: Breed
    gender:
      type: string
      enum:
        - Male
        - Female
      default: Male
    tagId:
      type: string
      title: Tag ID
    pedigree:
      type: string
      title: Pedigree
    photoEvidence:
      type: string
      title: Photo evidence
    field:
      $ref: '#/definitions/FieldId'
      title: Field
    landParcel:
      $ref: '#/definitions/NameID'
      title: Land parcel
    farmer:
      $ref: '#/definitions/NameID'
      title: Farmer
    collective:
      $ref: '#/definitions/CollectiveId'
      title: Collective
    acquisitionDay:
      type: string
      format: date
      title: Acquisition Day
    documents:
      type: array
      title: Document
      items:
        type: object
        properties:
          link:
            type: string
            title: Link
          name:
            type: string
            title: Name
          issuedBy:
            type: string
            title: Issued by
          docNumber:
            type: string
            title: Document number
          category:
            type: string
            enum:
              - Reports
              - Certificates
              - Supporting documents
            default: Reports
            title: Category
    validationWorkflowId:
      type: string
      format: hidden
    statusNotes:
      type: string
      format: hidden
    status:
      type: string
      enum:
        - Draft
        - Under validation
        - Under review
        - Review failed
        - Validation failed
        - Approved
        - In progress
        - Completed
      default: Draft
      title: Status
    active:
      type: boolean
      title: Active


    lactationPeriods:
      type: array
      title: Lactation Periods
      items:
        type: object
        title: ''
        properties:
          startDate:
            type: string
            format: date
            title: Start Date
          endDate:
            type: string
            format: date
            title: End Date
          status:
            type: string
            title: Status
            enum:
              - Active
              - Complete
            default: Active
          dailyProduction:
            type: array
            title: Daily Production
            items:
              type: object
              properties:
                date:
                  type: string
                  format: date
                  title: Date
                milkProduced:
                  type: number
                  title: Milk Produced (liters)
          averageDailyMilk:
            type: number
            title: Average Daily Milk (liters)
          totalMilkProduced:
            type: number
            title: Total Milk Produced (liters)

  allOf:
    - if:
        properties:
          gender:
            const: Female
      then:
        properties:
          lactionaPeriodDays:
            title: Lactation period (Days)
            type: number
            minimum: 0
            default: 365
          averageMilkProduction:
            type: number
            title: Average milk production (Litres)
            minimum: 0
            default: 1
 
  required:
    - productionSystem
    - age
    - cowSource
    - breed
    - field
    - landParcel
    - farmer
    - collective
    - tagId
    - gender
    - pedigree
    - active
uiHints: file:~/specs/jsonschemas/src/domain/ui/cow.yaml
